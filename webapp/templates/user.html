{% extends "base.html" %}

{% block content %}
    <h1>User Account</h1>
    <p>
        Username: {{ user.username }}<br>
        Email: {{ user.email }}
        {% if current_user.username == user.username %}
            <a href="{{ url_for('user', username=user.username, edit='email') }}"> edit</a>
            {% if form and edit == 'email' %}
                <form action="", method="POST">
                    {{ form.hidden_tag() }}
                    New {{ form.email.label }}<br>
                    {{ form.email(size=32) }}<br>
                    {% for error in form.email.errors %}
                        <span style="color: red;">[{{ error }}]</span><br>
                    {% endfor %}
                    {{ form.password.label }}<br>
                    {{ form.password(size=32) }}<br>
                    {% for error in form.password.errors %}
                        <span style="color: red;">[{{ error }}]</span><br>
                    {% endfor %}
                    {{ form.submit() }}
                </form>
            {% endif %}
        {% endif %}
        <br>
    </p>
    {% if current_user.username == user.username %}
        <p>
            <div>
                {% if form and edit == 'delete' %}
                    <br>Are you sure you want to delete your account? This can NOT be undone.<br><br>
                    <form action="", method="POST">
                        {{ form.hidden_tag() }}
                        {{ form.password.label }}<br>
                        {{ form.password(size=32) }}<br>
                        {% for error in form.password.errors %}
                            <span style="color: red;">[{{ error }}]</span><br>
                        {% endfor %}
                        {{ form.submit() }}
                    </form>
                {% else %}
                    <a href="{{ url_for('user', username=user.username, edit='delete') }}">Delete Account</a>
                {% endif %}
                <a href="{{ url_for('user_change_password', username=user.username) }}">Change Password</a>
            </div>
        </p>
    {% endif %}
{% endblock %}